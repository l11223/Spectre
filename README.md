<div align="center">

```
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
   â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  
   â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â• â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘        â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•  
   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—
   â•šâ•â•â•â•â•â•â•â•šâ•â•     â•šâ•â•â•â•â•â•â• â•šâ•â•â•â•â•â•   â•šâ•â•   â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•
```

**å†…æ ¸çº§éšåŒ¿ Root æ¡†æ¶**

*çœ‹ä¸è§çš„ï¼Œå°±æ£€æµ‹ä¸åˆ°ã€‚*

[![Build](https://github.com/l11223/Spectre/actions/workflows/build.yml/badge.svg)](https://github.com/l11223/Spectre/actions)
[![Release](https://img.shields.io/github/v/release/l11223/Spectre?color=00E5CC&label=Release)](https://github.com/l11223/Spectre/releases)
[![Downloads](https://img.shields.io/github/downloads/l11223/Spectre/total?color=00E5CC&label=Downloads)](https://github.com/l11223/Spectre/releases)
[![License](https://img.shields.io/badge/License-GPL%20v3-blue)](LICENSE)

[English](./README_EN.md) Â· ä¸­æ–‡

</div>

---

## æ¦‚è¿°

Spectre æ˜¯ä¸€ä¸ªåŸºäº [KernelPatch](https://github.com/bmax121/KernelPatch) çš„ Android Root æ–¹æ¡ˆï¼Œæ ¸å¿ƒç‰¹ç‚¹æ˜¯**å†…æ ¸çº§éšåŒ¿**ã€‚

ä¼ ç»Ÿ Root å·¥å…·ï¼ˆMagiskã€KernelSUï¼‰åœ¨åº”ç”¨å±‚å¯¹æŠ—æ£€æµ‹ï¼Œè€Œ Spectre çš„ ghost.kpm æ¨¡å—ç›´æ¥åœ¨å†…æ ¸ç©ºé—´æ‹¦æˆªç³»ç»Ÿè°ƒç”¨ï¼Œåœ¨æ£€æµ‹ä»£ç è¯»å–åˆ°æ•°æ®ä¹‹å‰å®Œæˆè¿‡æ»¤å’Œä¼ªè£…ã€‚å¯¹å¤–è¡¨ç°ä¸ºå®Œå…¨åŸå‚çŠ¶æ€ â€” æ¸¸æˆåä½œå¼Šã€é“¶è¡Œ Appã€Play Integrity å‡æ— æ³•æ„ŸçŸ¥ Root å­˜åœ¨ã€‚

---

## å·¥ä½œåŸç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç”¨æˆ·ç©ºé—´                        â”‚
â”‚                                                   â”‚
â”‚   æ¸¸æˆåä½œå¼Š            é“¶è¡Œ App                   â”‚
â”‚   access("/bin/su")     stat("/data/adb")         â”‚
â”‚   â†’ ENOENT              â†’ ENOENT                  â”‚
â”‚   /proc/maps â†’ å¹²å‡€     /proc/attr â†’ u:r:sh:s0   â”‚
â”‚   uname -r â†’ åŸå‚       TracerPid â†’ 0             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       â–¼                           â”‚
â”‚              ghost.kpm v5                         â”‚
â”‚                                                   â”‚
â”‚   15 ä¸ªå†…æ ¸ Hook  Â·  22 æ¡éšè—è·¯å¾„                 â”‚
â”‚   æ‹¦æˆª â†’ è¿‡æ»¤ â†’ ä¼ªè£… â†’ è¿”å›                       â”‚
â”‚                                                   â”‚
â”‚                   å†…æ ¸ç©ºé—´                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ghost.kpm â€” å†…æ ¸éšåŒ¿æ¨¡å—

ghost.kpm æ˜¯ Spectre çš„æ ¸å¿ƒç»„ä»¶ â€” çº¦ 600 è¡Œçº¯ C ä»£ç ï¼Œå®Œå…¨è‡ªä¸»å¼€å‘ã€‚å®ƒé€šè¿‡ 15 ä¸ªå†…æ ¸ hook åœ¨ç³»ç»Ÿè°ƒç”¨å±‚é¢æ‹¦æˆªæ‰€æœ‰ Root æ£€æµ‹å‘é‡ï¼Œè¦†ç›–ç›®å½•éå†ã€/proc æ–‡ä»¶ç³»ç»Ÿã€å†…æ ¸ç¬¦å·è¡¨ã€SELinux å®¡è®¡ã€æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥ç­‰å…¨éƒ¨æ”»å‡»é¢ã€‚æ‰€æœ‰ hook å‡ä¸ºå®é™…å·¥ä½œä»£ç ï¼Œæ— å ä½ç¬¦ã€æ— ç©ºå®ç°ã€‚


### éšåŒ¿èƒ½åŠ›æ€»è§ˆ

| æ£€æµ‹å‘é‡ | Hook æ•°é‡ | è¦†ç›–èŒƒå›´ |
|:---------|:----------|:---------|
| ç›®å½•/æ–‡ä»¶æ‰«æ | 4 | `filldir64` + `access()` / `stat()` / `open()` ä¸‰è·¯æ‹¦æˆª |
| /proc ä¿¡æ¯æ³„éœ² | 4 | mapsã€mountsã€statusã€wchan |
| å†…æ ¸ä¿¡æ¯æš´éœ² | 4 | dmesgã€kallsymsã€unameã€/proc/version |
| SELinux æ£€æµ‹ | 2 | AVC ç»•è¿‡ + ä¸Šä¸‹æ–‡ä¼ªè£… |
| å®¡è®¡æ—¥å¿— | 1 | å†…æ ¸çº§æ—¥å¿—æŠ‘åˆ¶ |
| **åˆè®¡** | **15** | **é›¶ç›²åŒº** |

### æ ¸å¿ƒéšè—

| Hook | ç›®æ ‡ | æ•ˆæœ |
|:-----|:-----|:-----|
| `filldir64` | ç›®å½•éå† | åŒé‡è¿‡æ»¤ï¼šéšè— `/data/adb/` ä¸‹ 8 ä¸ªæ··æ·†ç›®å½•ï¼ŒåŒæ—¶éšè— `/data/user/0/` å’Œ `/data/data/` ä¸‹çš„ç®¡ç†å™¨åŒ…åç›®å½• |
| `avc_denied` | SELinux | uid=0 è¿›ç¨‹é€æ˜ç»•è¿‡ SELinux æ‹’ç»ï¼Œæ— å®¡è®¡è®°å½• |
| `audit_log_start` | å®¡è®¡æ—¥å¿— | åœ¨å†…æ ¸å±‚æŠ‘åˆ¶ AVCã€SELINUX_ERRã€MAC_STATUS ä¸‰ç±»å®¡è®¡æ—¥å¿— |

### /proc éšè—

| Hook | ç›®æ ‡ | æ•ˆæœ |
|:-----|:-----|:-----|
| `show_map_vma` | `/proc/pid/maps` | è¿‡æ»¤ 16 ä¸ªå…³é”®è¯ï¼šroot åº“ã€zygiskã€riruã€shamikoã€kernelpatchã€lspdã€æ¨¡å—è·¯å¾„ç­‰ |
| `show_mountinfo` | `/proc/pid/mounts` | è¿‡æ»¤ 6 ä¸ªå…³é”®è¯ï¼šoverlayã€magiskã€KSUã€apatch æŒ‚è½½é¡¹ |
| `proc_pid_status` | `/proc/pid/status` | å¼ºåˆ¶ `TracerPid: 0`ï¼Œç»•è¿‡åè°ƒè¯•æ£€æµ‹ |
| `proc_pid_wchan` | `/proc/pid/wchan` | æ›¿æ¢ 7 ä¸ª KP ç›¸å…³ç¬¦å·ä¸ºæ— å®³çš„ `ep_poll` |

### å†…æ ¸ä¿¡æ¯éšè—

| Hook | ç›®æ ‡ | æ•ˆæœ |
|:-----|:-----|:-----|
| `devkmsg_read` | dmesg/kmsg | è¿‡æ»¤ 8 ä¸ªå…³é”®è¯ï¼Œå°† KernelPatch å¯åŠ¨ç—•è¿¹æ›¿æ¢ä¸ºæ— å®³è®°å½• |
| `s_show` | `/proc/kallsyms` | éšè— 8 ç±»ç¬¦å·ï¼š`supercall`ã€`kp_*`ã€`kernelpatch`ã€`ghost_*`ã€`spoof_*`ã€`hook_wrap`ã€`inline_hook`ã€`kpm_*` |
| `__arm64_sys_newuname` | `uname -r` | åŒæ—¶ä¼ªè£… release å’Œ version ä¸¤ä¸ªå­—æ®µï¼ˆå…¶ä»–æ–¹æ¡ˆé€šå¸¸åªæ”¹ releaseï¼‰ |
| `version_proc_show` | `/proc/version` | ä¼ªè£…å®Œæ•´ç‰ˆæœ¬å­—ç¬¦ä¸²ï¼Œé»˜è®¤å€¼æ¨¡æ‹Ÿ Pixel 9 Pro å†…æ ¸ |

### æ–‡ä»¶å­˜åœ¨æ€§éšè—

| Hook | ç›®æ ‡ | æ•ˆæœ |
|:-----|:-----|:-----|
| `do_faccessat` | `access()` | 22+ æ¡ root ç›¸å…³è·¯å¾„è¿”å› `-ENOENT`ï¼ˆä»…å¯¹é root è¿›ç¨‹ç”Ÿæ•ˆï¼‰ |
| `vfs_fstatat` | `stat()` | åŒä¸Š |
| `do_sys_openat2` | `open()` | åŒä¸Š |

è¦†ç›–è·¯å¾„åŒ…æ‹¬ï¼šç»å…¸ su è·¯å¾„ã€Spectre ç›®å½•ã€APatch ç›®å½•ã€Magisk ç›®å½•ã€KSU ç›®å½•ã€SuperSU è·¯å¾„ã€ç®¡ç†å™¨ App æ•°æ®ç›®å½•ã€‚

### SELinux ä¸Šä¸‹æ–‡éšè—

| Hook | ç›®æ ‡ | æ•ˆæœ |
|:-----|:-----|:-----|
| `selinux_getprocattr` | `/proc/pid/attr/current` | åŸåœ°æ›¿æ¢ï¼š`u:r:su:s0` â†’ `u:r:sh:s0`ï¼Œ`u:r:magisk:s0` â†’ `u:r:system:s0` |

### è¿è¡Œæ—¶æ§åˆ¶

ghost.kpm æä¾› `ghost_control` æ¥å£ï¼Œæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€æ“ä½œï¼š

- **æ›´æ–°ä¼ªè£…å€¼**ï¼šå¯åœ¨ä¸é‡å¯çš„æƒ…å†µä¸‹ä¿®æ”¹ uname releaseã€versionã€version string ä¸‰ä¸ªä¼ªè£…å­—æ®µ
- **çŠ¶æ€æŸ¥è¯¢**ï¼šæŸ¥è¯¢å½“å‰ ghost.kpm è¿è¡ŒçŠ¶æ€å’Œå·²åŠ è½½çš„ä¼ªè£…å€¼
- **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šé€šè¿‡ `hook_wrap` / `hook_unwrap` å®ç°å¹²å‡€çš„ hook æ³¨å†Œä¸æ³¨é”€

---

## ç›¸æ¯”åŸç‰ˆ APatch çš„æ”¹è¿›

Spectre åœ¨ APatch / FolkPatch åŸºç¡€ä¸Šè¿›è¡Œäº†å¤§é‡éšåŒ¿æ€§å’Œå®‰å…¨æ€§å¢å¼ºã€‚ä»¥ä¸‹æ¯ä¸€é¡¹æ”¹åŠ¨éƒ½æ¥è‡ªå¯¹å®é™…æ£€æµ‹æ‰‹æ®µçš„åˆ†æï¼Œä¸æ˜¯ä¸ºäº†æ”¹è€Œæ”¹ã€‚

### ğŸ”’ SuperKey å®‰å…¨ä¼ é€’

åŸç‰ˆ APatch é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¼ é€’ SuperKey â€” è¿™æ„å‘³ç€ç³»ç»Ÿä¸Š**ä»»ä½•è¿›ç¨‹**éƒ½å¯ä»¥é€šè¿‡ `/proc/<pid>/cmdline` è¯»å–åˆ°è¿™ä¸ªå¯†é’¥ã€‚è¿™æ˜¯ä¸€ä¸ªçœŸå®çš„å®‰å…¨æ¼æ´ï¼ˆVULN-01ï¼‰ã€‚

Spectre çš„ä¿®å¤æ–¹æ¡ˆé‡‡ç”¨ä¸‰çº§ä¼˜å…ˆçº§ï¼š

| ä¼˜å…ˆçº§ | æ–¹å¼ | å®‰å…¨æ€§ |
|:-------|:-----|:-------|
| 1ï¼ˆé¦–é€‰ï¼‰ | ç¯å¢ƒå˜é‡ `SKEY` | ä¸å‡ºç°åœ¨ `/proc/cmdline`ï¼Œè¿›ç¨‹é€€å‡ºåæ¶ˆå¤± |
| 2ï¼ˆå¤‡é€‰ï¼‰ | ä¸´æ—¶æ–‡ä»¶ `/data/adb/.fk/.skey` | è¯»å–åç«‹å³åˆ é™¤ |
| 3ï¼ˆå…¼å®¹ï¼‰ | å‘½ä»¤è¡Œå‚æ•° | ä»…ä½œä¸ºæ—§ç‰ˆå…¼å®¹å›é€€ |

### ğŸ—‚ï¸ æ··æ·†ç›®å½•ç»“æ„

æ‰€æœ‰å·¥ä½œç›®å½•ä»å¯è¯†åˆ«çš„åç§°æ”¹ä¸ºæ— æ„ä¹‰çš„çŸ­åã€‚åä½œå¼Šå¼•æ“æ‰«ææ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œæ— æ³•é€šè¿‡è·¯å¾„ç‰¹å¾è¯†åˆ« Root å·¥å…·çš„å­˜åœ¨ï¼š

| åŸç‰ˆè·¯å¾„ | Spectre è·¯å¾„ | è¯´æ˜ |
|:---------|:-------------|:-----|
| `/data/adb/ap/` | `/data/adb/.fk/` | å·¥ä½œç›®å½• |
| `/data/adb/ap/bin/` | `/data/adb/.fk/lib/` | äºŒè¿›åˆ¶ç›®å½• |
| `/data/adb/ap/log/` | `/data/adb/.fk/tmp/` | æ—¥å¿—ç›®å½• |
| `/data/adb/apd` | `/data/adb/.core` | å®ˆæŠ¤è¿›ç¨‹ |
| `/data/adb/modules/` | `/data/adb/.sp_ext/` | æ¨¡å—ç›®å½• |
| `/data/adb/modules_update/` | `/data/adb/.sp_ext_up/` | æ¨¡å—æ›´æ–°ç›®å½• |
| â€” | `/data/adb/.meta/` | Metamodule ç›®å½•ï¼ˆæ–°å¢ï¼‰ |
| â€” | `/data/adb/.sp_cfg/` | é…ç½®ç›®å½•ï¼ˆæ–°å¢ï¼‰ |

æ‰€æœ‰æ··æ·†è·¯å¾„ä¸ ghost.kpm çš„ `filldir64` hook åŒæ­¥ â€” å³ä½¿ç»•è¿‡äº†ç”¨æˆ·ç©ºé—´éšè—ï¼Œå†…æ ¸å±‚ä¹Ÿä¼šæ‹¦æˆªç›®å½•éå†ã€‚

### ğŸ‘» è¿›ç¨‹ä¼ªè£…

å®ˆæŠ¤è¿›ç¨‹é€šè¿‡ `PR_SET_NAME` å°†è¿›ç¨‹åè®¾ç½®ä¸º `servicemanager`ï¼Œæ—¥å¿— tag åŒæ­¥æ”¹ä¸º `ServiceManager`ã€‚åœ¨ `ps` è¾“å‡ºå’Œ `/proc` æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¸ Android åŸç”Ÿç³»ç»ŸæœåŠ¡å®Œå…¨æ— æ³•åŒºåˆ†ã€‚

### ğŸ§¹ ç¯å¢ƒå˜é‡æ¸…ç†

åŸç‰ˆ APatch åœ¨å­è¿›ç¨‹ä¸­ä¿ç•™äº†ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

- `KERNELPATCH`
- `KERNELPATCH_VERSION`
- `KERNEL_VERSION`
- `KP_READY`

ä»»ä½• App éƒ½å¯ä»¥é€šè¿‡ `/proc/<pid>/environ` æ£€æµ‹åˆ°è¿™äº›å˜é‡çš„å­˜åœ¨ã€‚Spectre åœ¨ fork å­è¿›ç¨‹æ—¶å®Œå…¨ç§»é™¤æ‰€æœ‰å¯æ£€æµ‹çš„ç¯å¢ƒå˜é‡ã€‚

### ğŸ›¡ï¸ SELinux ä¸Šä¸‹æ–‡æ›¿æ¢

| | åŸç‰ˆ APatch | Spectre |
|:--|:-----------|:--------|
| å†…éƒ¨ä¸Šä¸‹æ–‡ | `u:r:magisk:s0` | `u:r:su:s0` |
| å¤–éƒ¨å¯è§ | `u:r:magisk:s0`ï¼ˆç›´æ¥æš´éœ²ï¼‰ | `u:r:sh:s0`ï¼ˆghost.kpm hook ä¼ªè£…ï¼‰ |

`u:r:magisk:s0` æ˜¯æ‰€æœ‰ Root æ£€æµ‹å·¥å…·çš„é¦–è¦æ£€æŸ¥é¡¹ã€‚Spectre ä»ä¸¤ä¸ªå±‚é¢æ¶ˆé™¤è¿™ä¸ªç‰¹å¾ï¼šå†…éƒ¨ä½¿ç”¨ `u:r:su:s0`ï¼Œé€šè¿‡ ghost.kpm çš„ `selinux_getprocattr` hook å¯¹å¤–å±•ç¤ºä¸º `u:r:sh:s0`ã€‚

### ğŸ“¦ Metamodule ç³»ç»Ÿ

å…¨æ–°çš„ Metamodule æœºåˆ¶ï¼Œæä¾›ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­ï¼š

| é’©å­ | è§¦å‘æ—¶æœº | ç”¨é€” |
|:-----|:---------|:-----|
| `metamount.sh` | æ¨¡å—æŒ‚è½½é˜¶æ®µ | æ§åˆ¶å¸¸è§„æ¨¡å—çš„æŒ‚è½½æ–¹å¼ |
| `metainstall.sh` | æ¨¡å—å®‰è£…é˜¶æ®µ | è‡ªå®šä¹‰å®‰è£…é€»è¾‘ |
| `metauninstall.sh` | æ¨¡å—å¸è½½é˜¶æ®µ | æ¸…ç†å’Œå›é€€ |

Metamodule æ”¯æŒç¬¦å·é“¾æ¥è§£æå’Œå›é€€æœç´¢ï¼Œå¹¶å†…ç½®å®‰å…¨æ£€æŸ¥é˜²æ­¢åœ¨ä¸ç¨³å®šçŠ¶æ€ä¸‹å®‰è£…ã€‚

### ğŸ‘» ghost.kpm å†…æ ¸éšåŒ¿æ¨¡å—

çº¦ 600 è¡Œçº¯ C ä»£ç ï¼Œå®Œå…¨è‡ªä¸»å¼€å‘çš„å†…æ ¸æ¨¡å—ã€‚15 ä¸ªæ´»è·ƒçš„å†…æ ¸ hook è¦†ç›–æ‰€æœ‰å·²çŸ¥æ£€æµ‹å‘é‡ï¼Œä»ç³»ç»Ÿè°ƒç”¨å±‚é¢å®ç°éšåŒ¿ã€‚è¯¦è§ä¸Šæ–¹ [ghost.kpm ç« èŠ‚](#ghostkpm--å†…æ ¸éšåŒ¿æ¨¡å—)ã€‚

---

## ç®¡ç†å™¨åŠŸèƒ½

- ä¸€é”®ä¿®è¡¥ boot é•œåƒ
- é€åº”ç”¨ SuperUser æƒé™ç®¡ç†
- è‡ªå®šä¹‰ SU è·¯å¾„
- Magisk å…¼å®¹æ¨¡å—ç³»ç»Ÿï¼ˆAPMï¼‰
- KPM å†…æ ¸æ¨¡å—åŠ è½½å™¨ï¼Œghost.kpm å¼€æœºè‡ªåŠ¨åŠ è½½
- æ··æ·†ç›®å½•ç»“æ„ï¼Œè¿›ç¨‹ä¼ªè£…ä¸ºç³»ç»ŸæœåŠ¡
- å¤šä¸»é¢˜ã€è‡ªå®šä¹‰åº”ç”¨åç§°

---

## å¿«é€Ÿå¼€å§‹

```bash
# 1. ä» Releases ä¸‹è½½æœ€æ–° APK å’Œ ghost.kpm
# 2. å®‰è£… Spectre APK
# 3. é€šè¿‡ App ä¿®è¡¥ boot é•œåƒ
# 4. é€šè¿‡ fastboot åˆ·å…¥ä¿®è¡¥åçš„ boot
# 5. é‡å¯ â†’ æ‰“å¼€ Spectre â†’ åŠ è½½ ghost.kpm
```

---

## ä»æºç æ„å»º

```bash
# ç¯å¢ƒè¦æ±‚ï¼šJDK 21+, Android NDK r25c+, Rust + cargo-ndk

git clone https://github.com/l11223/Spectre.git
cd Spectre
./gradlew assembleRelease
```

ghost.kpm å•ç‹¬æ„å»ºï¼š

```bash
cd kpm/ghost
make NDK_PATH=/path/to/ndk KP_DIR=/path/to/KernelPatch
```

---

## é¡¹ç›®ç»“æ„

```
Spectre/
â”œâ”€â”€ app/                    # ç®¡ç†å™¨ Appï¼ˆKotlin / Jetpack Composeï¼‰
â”‚   â”œâ”€â”€ src/main/cpp/       # JNI â†’ KernelPatch supercall æ¡¥æ¥
â”‚   â””â”€â”€ src/main/java/      # UIã€ä¿®è¡¥ã€SU ç®¡ç†
â”œâ”€â”€ apd/                    # Root å®ˆæŠ¤è¿›ç¨‹ï¼ˆRustï¼‰
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ apd.rs          # Root shell å¤„ç†
â”‚       â”œâ”€â”€ supercall.rs    # å†…æ ¸æ¥å£
â”‚       â””â”€â”€ defs.rs         # æ··æ·†è·¯å¾„å®šä¹‰
â”œâ”€â”€ kpm/ghost/              # å†…æ ¸éšåŒ¿æ¨¡å—ï¼ˆCï¼‰
â”‚   â””â”€â”€ src/ghost_main.c    # 15 ä¸ªå†…æ ¸ hook
â””â”€â”€ .github/workflows/      # CI/CD
```

---

## è‡´è°¢

| é¡¹ç›® | è¯´æ˜ |
|:-----|:-----|
| [KernelPatch](https://github.com/bmax121/KernelPatch) | å†…æ ¸ä¿®è¡¥æ¡†æ¶ |
| [APatch](https://github.com/bmax121/APatch) | Android ä¿®è¡¥æ¶æ„ |
| [Magisk](https://github.com/topjohnwu/Magisk) | magiskboot / magiskpolicy |
| [KernelSU](https://github.com/tiann/KernelSU) | App UI å‚è€ƒ |

---

## è®¸å¯è¯

[GPL-3.0](LICENSE)
